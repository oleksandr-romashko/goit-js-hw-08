{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst LS_FORM_DATA_KEY = 'feedback-form-state';\n\nconst form = document.querySelector('.feedback-form');\nform.addEventListener('input', throttle(onInput, 500));\nform.addEventListener('submit', onFormSubmit);\n\nconst storageData = loadFromStorage();\nif (Object.keys(storageData).length) {\n  [...form.elements].forEach(el => {\n    el.value = storageData[el.name];\n  });\n}\n\nfunction onInput() {\n  const formData = getFormData();\n  Object.keys(formData).length ? saveToStorage(formData) : clearStorage();\n}\n\nfunction getFormData() {\n  const formData = {};\n  [...form.elements].forEach(({ nodeName, name, value }) => {\n    if (nodeName !== 'BUTTON' && value) {\n      formData[name] = value;\n    }\n  });\n  return formData;\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n  console.log(getFormData());\n  form.reset();\n  clearStorage();\n}\n\nfunction loadFromStorage() {\n  return JSON.parse(localStorage.getItem(LS_FORM_DATA_KEY)) ?? {};\n}\n\nfunction saveToStorage(data) {\n  localStorage.setItem(LS_FORM_DATA_KEY, JSON.stringify(data));\n}\n\nfunction clearStorage() {\n  localStorage.removeItem(LS_FORM_DATA_KEY);\n}\n"],"names":["LS_FORM_DATA_KEY","form","throttle","onInput","onFormSubmit","storageData","loadFromStorage","el","formData","getFormData","saveToStorage","clearStorage","nodeName","name","value","event","data"],"mappings":"wIAEA,MAAMA,EAAmB,sBAEnBC,EAAO,SAAS,cAAc,gBAAgB,EACpDA,EAAK,iBAAiB,QAASC,EAASC,EAAS,GAAG,CAAC,EACrDF,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,MAAMC,EAAcC,EAAe,EAC/B,OAAO,KAAKD,CAAW,EAAE,QAC3B,CAAC,GAAGJ,EAAK,QAAQ,EAAE,QAAQM,GAAM,CAC/BA,EAAG,MAAQF,EAAYE,EAAG,IAAI,CAClC,CAAG,EAGH,SAASJ,GAAU,CACjB,MAAMK,EAAWC,IACjB,OAAO,KAAKD,CAAQ,EAAE,OAASE,EAAcF,CAAQ,EAAIG,GAC3D,CAEA,SAASF,GAAc,CACrB,MAAMD,EAAW,CAAA,EACjB,OAAC,GAAGP,EAAK,QAAQ,EAAE,QAAQ,CAAC,CAAE,SAAAW,EAAU,KAAAC,EAAM,MAAAC,KAAY,CACpDF,IAAa,UAAYE,IAC3BN,EAASK,CAAI,EAAIC,EAEvB,CAAG,EACMN,CACT,CAEA,SAASJ,EAAaW,EAAO,CAC3BA,EAAM,eAAc,EACpB,QAAQ,IAAIN,EAAW,CAAE,EACzBR,EAAK,MAAK,EACVU,GACF,CAEA,SAASL,GAAkB,CACzB,OAAO,KAAK,MAAM,aAAa,QAAQN,CAAgB,CAAC,GAAK,EAC/D,CAEA,SAASU,EAAcM,EAAM,CAC3B,aAAa,QAAQhB,EAAkB,KAAK,UAAUgB,CAAI,CAAC,CAC7D,CAEA,SAASL,GAAe,CACtB,aAAa,WAAWX,CAAgB,CAC1C"}